{"version":3,"file":"curriable.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["/**\n * @constant __ placeholder used when parameters are skipped\n */\nexport const __: Placeholder =\n  typeof Symbol === 'function' ? Symbol('curriable placeholder') : 0xedd1;\n\n/**\n * @function recursiveCurry\n *\n * @description\n * recursively curry over the arguments until all have been resolved\n *\n * @param fn the function to curry\n * @param arity the length of the function to curry until\n * @param args the existing arguments\n * @returns the result of the function call\n */\nexport function getCurried<Fn extends Handler>(fn: Fn, arity: number): Curry<Fn> {\n  function _curried(args: any[]) {\n    return function () {\n      const length: number = args.length;\n\n      const newArgs: IArguments = arguments;\n      const { length: newArgsLength } = newArgs;\n\n      const combined: any[] = [];\n\n      let newArgsIndex = 0;\n      let remaining = arity;\n      let value: any;\n\n      if (length) {\n        let index = -1;\n\n        while (++index < length) {\n          combined[index] = value =\n            args[index] === __ && newArgsIndex < newArgsLength\n              ? newArgs[newArgsIndex++]\n              : args[index];\n\n          if (value !== __) {\n            --remaining;\n          }\n        }\n      }\n\n      if (newArgsIndex < newArgsLength) {\n        while (newArgsIndex < newArgsLength) {\n          combined[combined.length] = value = newArgs[newArgsIndex];\n\n          if (value !== __ && newArgsIndex < arity) {\n            --remaining;\n          }\n\n          ++newArgsIndex;\n        }\n      }\n\n      return remaining > 0 ? _curried(combined) : fn.apply(this, combined);\n    };\n  }\n\n  return _curried([]);\n}\n","// utils\nimport { __, getCurried } from './utils';\n\nexport { __ };\n\n/**\n * @function curry\n *\n * @description\n * get the method passed as a curriable method based on its parameters\n *\n * @param fn the method to make curriable\n * @param arityOverride the hard-coded arity of the curried method\n * @returns the fn passed as a curried function\n */\nexport function curry<Fn extends Handler>(fn: Fn): Curried<Fn>;\nexport function curry<Fn extends Handler>(fn: Fn, arityOverride: number): Handler;\nexport function curry<Fn extends Handler>(fn: Fn, arityOverride?: number) {\n  const arity = typeof arityOverride === 'number' ? arityOverride : fn.length;\n  const curried = getCurried(fn, arity) as Curried<Fn>;\n\n  curried.arity = arity;\n  curried.fn = fn;\n\n  return curried;\n}\n\ncurry.__ = __;\n\n/**\n * @function isPlaceholder\n *\n * @description\n * is the value passed a placeholder\n *\n * @param value the value to test\n * @returns whether the value is a placeholder\n */\nexport function isPlaceholder(value: any): value is Placeholder {\n  return value === __;\n}\n\ncurry.isPlaceholder = isPlaceholder;\n\n/**\n * @function uncurry\n *\n * @description\n * return a function that is the non-curried version of the fn passed\n *\n * @param curried the curried function to uncurry\n * @returns the original fn\n */\nexport function uncurry<Fn extends Handler>(curried: Curried<Fn>): Fn {\n  return curried.fn;\n}\n\ncurry.uncurry = uncurry;\n\nexport default curry;\n"],"names":[],"mappings":";;;;;;EAAA;;;AAGA,MAAa,EAAE,GACb,OAAO,MAAM,KAAK,UAAU,GAAG,MAAM,CAAC,uBAAuB,CAAC,GAAG,MAAM,CAAC;EAE1E;;;;;;;;;;;AAWA,WAAgB,UAAU,CAAqB,EAAM,EAAE,KAAa;MAClE,SAAS,QAAQ,CAAC,IAAW;UAC3B,OAAO;cACL,IAAM,MAAM,GAAW,IAAI,CAAC,MAAM,CAAC;cAEnC,IAAM,OAAO,GAAe,SAAS,CAAC;cAC9B,IAAA,8BAAqB,CAAa;cAE1C,IAAM,QAAQ,GAAU,EAAE,CAAC;cAE3B,IAAI,YAAY,GAAG,CAAC,CAAC;cACrB,IAAI,SAAS,GAAG,KAAK,CAAC;cACtB,IAAI,KAAU,CAAC;cAEf,IAAI,MAAM,EAAE;kBACV,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;kBAEf,OAAO,EAAE,KAAK,GAAG,MAAM,EAAE;sBACvB,QAAQ,CAAC,KAAK,CAAC,GAAG,KAAK;0BACrB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,YAAY,GAAG,aAAa;gCAC9C,OAAO,CAAC,YAAY,EAAE,CAAC;gCACvB,IAAI,CAAC,KAAK,CAAC,CAAC;sBAElB,IAAI,KAAK,KAAK,EAAE,EAAE;0BAChB,EAAE,SAAS,CAAC;uBACb;mBACF;eACF;cAED,IAAI,YAAY,GAAG,aAAa,EAAE;kBAChC,OAAO,YAAY,GAAG,aAAa,EAAE;sBACnC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;sBAE1D,IAAI,KAAK,KAAK,EAAE,IAAI,YAAY,GAAG,KAAK,EAAE;0BACxC,EAAE,SAAS,CAAC;uBACb;sBAED,EAAE,YAAY,CAAC;mBAChB;eACF;cAED,OAAO,SAAS,GAAG,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;WACtE,CAAC;OACH;MAED,OAAO,QAAQ,CAAC,EAAE,CAAC,CAAC;EACtB,CAAC;;EC/DD;AACA,WAgBgB,KAAK,CAAqB,EAAM,EAAE,aAAsB;MACtE,IAAM,KAAK,GAAG,OAAO,aAAa,KAAK,QAAQ,GAAG,aAAa,GAAG,EAAE,CAAC,MAAM,CAAC;MAC5E,IAAM,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,KAAK,CAAgB,CAAC;MAErD,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;MACtB,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC;MAEhB,OAAO,OAAO,CAAC;EACjB,CAAC;EAED,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC;EAEd;;;;;;;;;AASA,WAAgB,aAAa,CAAC,KAAU;MACtC,OAAO,KAAK,KAAK,EAAE,CAAC;EACtB,CAAC;EAED,KAAK,CAAC,aAAa,GAAG,aAAa,CAAC;EAEpC;;;;;;;;;AASA,WAAgB,OAAO,CAAqB,OAAoB;MAC9D,OAAO,OAAO,CAAC,EAAE,CAAC;EACpB,CAAC;EAED,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;;;;;;;;;;;;;;;;"}