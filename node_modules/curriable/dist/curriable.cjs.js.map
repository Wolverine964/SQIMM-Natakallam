{"version":3,"file":"curriable.cjs.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["/**\n * @constant __ placeholder used when parameters are skipped\n */\nexport const __: Placeholder =\n  typeof Symbol === 'function' ? Symbol('curriable placeholder') : 0xedd1;\n\n/**\n * @function recursiveCurry\n *\n * @description\n * recursively curry over the arguments until all have been resolved\n *\n * @param fn the function to curry\n * @param arity the length of the function to curry until\n * @param args the existing arguments\n * @returns the result of the function call\n */\nexport function getCurried<Fn extends Handler>(fn: Fn, arity: number): Curry<Fn> {\n  function _curried(args: any[]) {\n    return function () {\n      const length: number = args.length;\n\n      const newArgs: IArguments = arguments;\n      const { length: newArgsLength } = newArgs;\n\n      const combined: any[] = [];\n\n      let newArgsIndex = 0;\n      let remaining = arity;\n      let value: any;\n\n      if (length) {\n        let index = -1;\n\n        while (++index < length) {\n          combined[index] = value =\n            args[index] === __ && newArgsIndex < newArgsLength\n              ? newArgs[newArgsIndex++]\n              : args[index];\n\n          if (value !== __) {\n            --remaining;\n          }\n        }\n      }\n\n      if (newArgsIndex < newArgsLength) {\n        while (newArgsIndex < newArgsLength) {\n          combined[combined.length] = value = newArgs[newArgsIndex];\n\n          if (value !== __ && newArgsIndex < arity) {\n            --remaining;\n          }\n\n          ++newArgsIndex;\n        }\n      }\n\n      return remaining > 0 ? _curried(combined) : fn.apply(this, combined);\n    };\n  }\n\n  return _curried([]);\n}\n","// utils\nimport { __, getCurried } from './utils';\n\nexport { __ };\n\n/**\n * @function curry\n *\n * @description\n * get the method passed as a curriable method based on its parameters\n *\n * @param fn the method to make curriable\n * @param arityOverride the hard-coded arity of the curried method\n * @returns the fn passed as a curried function\n */\nexport function curry<Fn extends Handler>(fn: Fn): Curried<Fn>;\nexport function curry<Fn extends Handler>(fn: Fn, arityOverride: number): Handler;\nexport function curry<Fn extends Handler>(fn: Fn, arityOverride?: number) {\n  const arity = typeof arityOverride === 'number' ? arityOverride : fn.length;\n  const curried = getCurried(fn, arity) as Curried<Fn>;\n\n  curried.arity = arity;\n  curried.fn = fn;\n\n  return curried;\n}\n\ncurry.__ = __;\n\n/**\n * @function isPlaceholder\n *\n * @description\n * is the value passed a placeholder\n *\n * @param value the value to test\n * @returns whether the value is a placeholder\n */\nexport function isPlaceholder(value: any): value is Placeholder {\n  return value === __;\n}\n\ncurry.isPlaceholder = isPlaceholder;\n\n/**\n * @function uncurry\n *\n * @description\n * return a function that is the non-curried version of the fn passed\n *\n * @param curried the curried function to uncurry\n * @returns the original fn\n */\nexport function uncurry<Fn extends Handler>(curried: Curried<Fn>): Fn {\n  return curried.fn;\n}\n\ncurry.uncurry = uncurry;\n\nexport default curry;\n"],"names":[],"mappings":";;;;AAAA;;;AAGA,IAAa,EAAE,GACb,OAAO,MAAM,KAAK,UAAU,GAAG,MAAM,CAAC,uBAAuB,CAAC,GAAG,MAAM,CAAC;;;;;;;;;;;;AAa1E,SAAgB,UAAU,CAAqB,EAAM,EAAE,KAAa;IAClE,SAAS,QAAQ,CAAC,IAAW;QAC3B,OAAO;YACL,IAAM,MAAM,GAAW,IAAI,CAAC,MAAM,CAAC;YAEnC,IAAM,OAAO,GAAe,SAAS,CAAC;YAC9B,IAAA,8BAAqB,CAAa;YAE1C,IAAM,QAAQ,GAAU,EAAE,CAAC;YAE3B,IAAI,YAAY,GAAG,CAAC,CAAC;YACrB,IAAI,SAAS,GAAG,KAAK,CAAC;YACtB,IAAI,KAAU,CAAC;YAEf,IAAI,MAAM,EAAE;gBACV,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;gBAEf,OAAO,EAAE,KAAK,GAAG,MAAM,EAAE;oBACvB,QAAQ,CAAC,KAAK,CAAC,GAAG,KAAK;wBACrB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,YAAY,GAAG,aAAa;8BAC9C,OAAO,CAAC,YAAY,EAAE,CAAC;8BACvB,IAAI,CAAC,KAAK,CAAC,CAAC;oBAElB,IAAI,KAAK,KAAK,EAAE,EAAE;wBAChB,EAAE,SAAS,CAAC;qBACb;iBACF;aACF;YAED,IAAI,YAAY,GAAG,aAAa,EAAE;gBAChC,OAAO,YAAY,GAAG,aAAa,EAAE;oBACnC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;oBAE1D,IAAI,KAAK,KAAK,EAAE,IAAI,YAAY,GAAG,KAAK,EAAE;wBACxC,EAAE,SAAS,CAAC;qBACb;oBAED,EAAE,YAAY,CAAC;iBAChB;aACF;YAED,OAAO,SAAS,GAAG,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;SACtE,CAAC;KACH;IAED,OAAO,QAAQ,CAAC,EAAE,CAAC,CAAC;CACrB;;AC/DD;AACA,SAgBgB,KAAK,CAAqB,EAAM,EAAE,aAAsB;IACtE,IAAM,KAAK,GAAG,OAAO,aAAa,KAAK,QAAQ,GAAG,aAAa,GAAG,EAAE,CAAC,MAAM,CAAC;IAC5E,IAAM,OAAO,GAAG,UAAU,CAAC,EAAE,EAAE,KAAK,CAAgB,CAAC;IAErD,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;IACtB,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC;IAEhB,OAAO,OAAO,CAAC;CAChB;AAED,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC;;;;;;;;;;AAWd,SAAgB,aAAa,CAAC,KAAU;IACtC,OAAO,KAAK,KAAK,EAAE,CAAC;CACrB;AAED,KAAK,CAAC,aAAa,GAAG,aAAa,CAAC;;;;;;;;;;AAWpC,SAAgB,OAAO,CAAqB,OAAoB;IAC9D,OAAO,OAAO,CAAC,EAAE,CAAC;CACnB;AAED,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;;;;;;;;"}